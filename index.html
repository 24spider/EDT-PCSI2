// --- TROUVER LA SEMAINE COURANTE ---
function getCurrentWeek() {
  const today = new Date();
  for (let i = 0; i < weeks.length; i++) {
    const start = new Date(weeks[i].start);
    const next = (i + 1 < weeks.length) ? new Date(weeks[i + 1].start) : null;

    if (today >= start && (!next || today < next)) {
      return weeks[i].num;
    }
  }
  return weeks.length + 1; // Retourne 17, 18... si on est après la dernière semaine
}

let currentWeek = getCurrentWeek();

// --- AFFICHAGE ---
function showWeek(num) {
  const week = weeks.find(w => w.num === num);
  
  // Si la semaine n'existe pas dans le tableau, on affiche juste le numéro
  const label = week ? week.label : "hors période";
  
  const imageUrl = week ? `edt/groupe${groupe}/semaine${week.num}.png` : "";
  
  document.getElementById("edt").innerHTML = `
    <p>Semaine calculée par le script : ${num} (${label})</p>
    ${imageUrl ? `<img src="${imageUrl}" alt="Emploi du temps Semaine ${num}">` : `<p>Aucune image disponible</p>`}
  `;
}

// Affiche la semaine actuelle
showWeek(currentWeek);
